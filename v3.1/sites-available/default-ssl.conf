<IfModule mod_ssl.c>
	<VirtualHost _default_:${SSL_PORT}>
		ServerName ${SERVER_NAME}
		ServerAdmin ${SERVER_ADMIN}

		LogLevel ${APACHE_LOGLEVEL}
		ErrorLog ${APACHE_ERRORLOG}
		CustomLog ${APACHE_ACCESSLOG} "env=!nologging"

		SSLEngine on

		SSLCertificateFile	/etc/ssl/certs/ssl-cert-snakeoil.pem
		SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

		SSLProxyEngine ${PROXY_SSL}
		SSLProxyVerify ${PROXY_SSL_VERIFY}
		SSLProxyCheckPeerName ${PROXY_SSL_CHECK_PEER_NAME}
		SSLProxyCACertificateFile ${PROXY_SSL_CA_CERT}

		ProxyRequests off
		ProxyErrorOverride on
		ProxyPreserveHost ${PROXY_PRESERVE_HOST}
		ProxyTimeout ${PROXY_TIMEOUT}

		ProxyPass / ${BACKEND}/ disablereuse=on
		ProxyPassReverse / ${BACKEND}/

	</VirtualHost>
</IfModule>
